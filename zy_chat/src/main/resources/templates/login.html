<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>小毅毅个人网站</title>
    <link rel="shortcut icon" th:href="@{static/img/favicon.ico}" type="image/x-icon"/>
    <link th:href="@{/layui/css/layui.css}" href="/layui/css/layui.css" rel="stylesheet"/>
    <style type="text/css">
        #test1{
            /*margin-top: 150px;*/
            position:absolute;
        }
        #log{
            position: absolute;z-index: 1;width: 400px;height: 450px;
            /*border:1px solid #0C0C0C;*/
            left: 0; top: -130px; right: 0; bottom: 0;margin: auto;
        }
        #content{
            /*position: absolute;*/
            /*z-index: 1;*/
            /*border:1px solid #0C0C0C;*/
            display: flex;
            justify-content: center; /* 水平居中 */
            align-items: center;     /* 垂直居中 */
            flex-direction:column;
        }
        #gushi{
            position: absolute;z-index: 1;width: 130px;height: 450px;
            /*border:1px solid #0C0C0C;*/
            left: -300px; top: 0px;
        }
        #gushi ul{
            float: left;
        }
        #gushi ul li{
            text-align: center;
            font-size: 30px;
            font-weight: 200;
            color: #ec971f;
            font-family:KaiTi;
        }
        #gushiFirst{
            margin-left: 30%;
        }
        #gushiLast{
            margin-top: 30%;
        }
    </style>
</head>
<body>

<!--<p>登录界面</p>-->
<div class="layui-carousel" id="test1">
    <div carousel-item>
        <div>
            <img th:src="@{/img/1001182.jpg}" alt="" style="height: 100%;width: 100%;"/>
        </div>
        <div>
            <img th:src="@{/img/1001455.jpg}" alt="" style="height: 100%;width: 100%;"/>
        </div>
        <div>
            <img th:src="@{/img/1001704.jpg}" alt="" style="height: 100%;width: 100%;"/>
        </div>
        <div>
            <img th:src="@{/img/2000636.jpg}" alt="" style="height: 100%;width: 100%;"/>
        </div>
    </div>
</div>

<div id="log">

    <div id="gushi">
        <ul id="gushiLast">
            <li>秋</li>
            <li>水</li>
            <li>共</li>
            <li>长</li>
            <li>天</li>
            <li>一</li>
            <li>色</li>
            <!--<li>。</li>-->
        </ul>

        <ul id="gushiFirst">
            <li>落</li>
            <li>霞</li>
            <li>与</li>
            <li>孤</li>
            <li>鹜</li>
            <li>齐</li>
            <li>飞</li>
            <!--<li>，</li>-->
        </ul>
    </div>

    <div id="content">
        <div id="logo">
            <!--<i class="layui-icon layui-icon-rate-solid" style="font-size: 60px;color: #FFFFFF"></i>-->
            <img th:src="@{/img/login_logo.png}" alt="" style="height: 20%;width: 20%;"/>
        </div>
        <!--<div id="btn2" style="width: 100%;display: flex;justify-content: center; /* 水平居中 */">-->
            <!--<input type="button" id="loginBtn" class="" value="登录">-->
            <!--<input type="button" id="regist" class="" value="注册">-->
        <!--</div>-->
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" style="width: 100%;">
            <ul class="layui-tab-title" style="margin: auto">
                <li class="layui-this" style="width: 170px;font-size: 20px;">登录</li>
                <li style="width: 170px;font-size: 20px;">注册</li>
            </ul>
            <div class="layui-tab-content" style="height: 100px;">
                <div class="layui-tab-item layui-show" >
                    <div style=" display: flex;
            /*justify-content: center; !* 水平居中 *!*/
            /*align-items: center;     !* 垂直居中 *!*/
            flex-direction:column;">
                        <!--<input type="text" class="form-control" id="userName" placeholder="用户名..." style="width: 100%;margin-top: 5%;">-->
                        <!--<input type="password" placeholder="密码..." id="pwd" class="form-control" style="width: 100%;margin-top: 5%;"/>-->

                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item" style="width: 100%;margin-top: 5%;">
                                <!--<label class="layui-form-label" >-->
                                    <!--<i class="layui-icon layui-icon-face-smile" style="font-size: 30px; color: #1E9FFF;"></i>-->
                                <!--</label>-->
                                <!--<div class="layui-input-inline" >-->
                                    <!--<input type="text" id="userName" placeholder="请输入" autocomplete="off" class="layui-input">-->
                                <!--</div>-->
                                <!--<div class="layui-input-block">-->
                                    <input type="text" name="title" lay-verify="title" id="userName" autocomplete="off" placeholder="请输入账号" class="layui-input" style="background-color:rgba(225,225,225,0.7);">
                                <!--</div>-->
                            </div>

                            <div class="layui-form-item" style="width: 100%;margin-top: 5%;">
                                <!--<label class="layui-form-label">-->
                                    <!--<i class="layui-icon layui-icon-face-smile" style="font-size: 30px; color: #1E9FFF;"></i>-->
                                <!--</label>-->
                                <!--<div class="layui-input-inline" >-->
                                    <!--<input type="text" name="pwd" id="pwd"  placeholder="请输入" autocomplete="off" class="layui-input">-->
                                <!--</div>-->
                                <input type="password" name="title" lay-verify="title" id="password" autocomplete="off" placeholder="请输入密码" class="layui-input" style="background-color:rgba(225,225,225,0.7);">
                            </div>
                        </form>
                            <div id="4" style="width: 100%;margin-top: 2%;">
                                <span style="float: left">
                                  <input type="checkbox" checked="" value="记住密码">记住密码
                                </span>
                                <!--<div class="layui-input-block">-->
                                    <!--<input type="checkbox" name="like1[write]" lay-skin="primary" title="写作" checked="">-->
                                    <!--<input type="checkbox" name="like1[read]" lay-skin="primary" title="阅读">-->
                                    <!--<input type="checkbox" name="like1[game]" lay-skin="primary" title="游戏" disabled="">-->
                                <!--</div>-->
                                <span style="float: right"><a>忘记密码？</a></span>
                            </div>

                        <div style="width: 100%;margin-top: 5%;">
                            <!--<input type="button" id="login" class="btn btn-primary btn-round btn-lg btn-block" value="登录" style="width: 100%;">-->
                            <button type="button" class="layui-btn" id="login" style="width: 100%;font-size: 20px;">登&nbsp;&nbsp;录</button>
                        </div>

                        <div id="msg" style="width: 100%;text-align: center;margin-top: 5%;">-----使用合作账户登录-----</div>
                        <div id="3login" style="width: 100%;margin-top: 5%;">
                            <ul>
                                <!--<li style="float: left;width: 20%">-->
                                    <!--&lt;!&ndash;<i class="layui-icon layulayui-icon-login-wechat" style="font-size: 30px;"></i>&ndash;&gt;-->
                                    <!--<i class="layui-icon layui-icon-login-wechat" style="font-size: 30px; color: #1E9FFF;"></i>-->
                                <!--</li>-->
                                <li style="float: left;width: 33%;text-align: center">
                                    <i class="layui-icon layui-icon-login-wechat" style="font-size: 30px; color: #00FF00;"></i>
                                </li>
                                <li style="float: left;width: 33%;text-align: center">
                                    <i class="layui-icon layui-icon-login-qq" style="font-size: 30px; color: #1E9FFF;"></i>
                                </li>
                                <li style="float: left;width: 33%;text-align: center">
                                    <i class="layui-icon layui-icon-login-weibo" style="font-size: 30px; color: red;"></i>
                                </li>
                            </ul>
                        </div>
                    </div>


                </div>
                <div class="layui-tab-item">
                    22
                </div>
            </div>
        </div>


    </div>
</div>

</body>
<script th:src="@{/layui/layui.js}" src="/layui/layui.js"></script>
<script th:src="@{/js/jquery-1.11.1.min.js}" src="/js/jquery-1.11.1.min.js"></script>
<!--<script th:src="@{/layui/layer.min.js}" src="/layui/layer.min.js"></script>-->
<script type="text/javascript" th:inline="javascript">
    layui.use('carousel', function(){
        var carousel = layui.carousel;
        //建造实例
        carousel.render({
            elem: '#test1'
            ,width: '100%' //设置容器宽度
            ,height:'780px'
            ,arrow: 'hover' //切换箭头默认显示状态，可选值为：hover（悬停显示）,always（始终显示）,none（始终不显示）
            ,anim: 'fade' //轮播切换动画方式，可选值为：default（左右切换），updown（上下切换），fade（渐隐渐显切换）
            ,interval: 3000 //自动切换的时间间隔，单位：ms（毫秒），不能低于800
        });
    });
    layui.use('element', function(){
        var $ = layui.jquery
            ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
        //触发事件
        var active = {
            tabAdd: function(){
                //新增一个Tab项
                element.tabAdd('demo', {
                    title: '新选项'+ (Math.random()*1000|0) //用于演示
                    ,content: '内容'+ (Math.random()*1000|0)
                    ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
                })
            }
            ,tabDelete: function(othis){
                //删除指定Tab项
                element.tabDelete('demo', '44'); //删除：“商品管理”


                othis.addClass('layui-btn-disabled');
            }
            ,tabChange: function(){
                //切换到指定Tab项
                element.tabChange('demo', '22'); //切换到：用户管理
            }
        };

        $('.site-demo-active').on('click', function(){
            var othis = $(this), type = othis.data('type');
            active[type] ? active[type].call(this, othis) : '';
        });

        //Hash地址的定位
        var layid = location.hash.replace(/^#test=/, '');
        element.tabChange('test', layid);

        element.on('tab(test)', function(elem){
            location.hash = 'test='+ $(this).attr('lay-id');
        });

    });


    /**界面初始化方法*/
    window.onload=function() {
        $("#userName").focus();
    }

    //按键按下时触发事件
    document.onkeydown = function () {
        if (event.keyCode == 13) {
            event.returnValue = false;
            event.cancel = true;
            loginOnClick();
            // alert("on")
        }
    }
    // event.returnValue = false;//设置事件的返回值为false,这样防止asp.net回传，而只仅仅触发按钮的链接，这样才不会刷新两次
    // event.cancel = true;  //这一条经过测试可以取消，

    $('#login').click(function (){
        loginOnClick();
    })

    function loginOnClick() {
        var userName=$("#userName").val();
        var pwd=$("#password").val()
        //登陆
        var JsonData = {
            name: userName,
            password: pwd
        };
        console.log(JsonData);
        // var index=layer.load(5);
        $.ajax({
            url : [[@{/login}]],
                type : 'post',
            contentType : 'application/json;charset=UTF=8',
            data : JSON.stringify(JsonData),
            dataType : 'json',
            success : function(res) {
            console.log("11111111111111111111");
            //认证完成
            if(res.code==0){

                console.log(res);
                // window.location.href=[[@{/index}]]   +'?userName='+userName;
                window.location.href=[[@{/index}]];
            }
            else{
                    // layer.close(index);
                    alert("账号密码错误！");
                }
            },
            error : function(res) {
                // console.log("2222222222222222222");
                // console.log(res);
                // layer.close(index);
                alert("error");
            }
        })
    }


</script>
</html>